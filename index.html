<!DOCTYPE html>
<html>
<head>
    <title>Chit Fund Calculator - Advanced Analysis & Best Month Recommendations</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        body { font-family: 'Segoe UI', Arial; margin: 0; padding: 20px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .container { max-width: 1200px; margin: 0 auto; display: flex; gap: 25px; }
        .input-section { background: linear-gradient(145deg, #ffffff, #f0f0f0); padding: 25px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.15); flex: 2; }
        .output-section { background: linear-gradient(145deg, #1a1a2e, #16213e); color: white; padding: 25px; border-radius: 15px; box-shadow: 0 8px 25px rgba(0,0,0,0.3); flex: 1; }
        h1 { text-align: center; color: white; margin-bottom: 30px; font-size: 2.5em; text-shadow: 2px 2px 4px rgba(0,0,0,0.3); }
        h2 { color: #4a5568; font-size: 22px; margin-bottom: 20px; border-bottom: 2px solid #e2e8f0; padding-bottom: 8px; }
        .output-section h2 { color: #ffd700; border-bottom: 2px solid #ffd700; }
        .input-line { display: flex; justify-content: space-between; align-items: center; margin: 18px 0; }
        label { width: 150px; font-size: 15px; color: #2d3748; font-weight: 500; }
        input[type="text"], input[type="number"] { width: 140px; height: 35px; background: linear-gradient(145deg, #e6fffa, #b2f5ea); border: 2px solid #38b2ac; color: #234e52; font-weight: bold; padding: 8px; border-radius: 8px; font-size: 14px; }
        input[type="range"] { width: 100%; height: 6px; background: linear-gradient(90deg, #667eea, #764ba2); outline: none; margin: 15px 0; border-radius: 3px; }
        .radio-group { display: flex; justify-content: space-around; margin: 20px 0; background: #f7fafc; padding: 15px; border-radius: 10px; }
        .radio-group input[type="radio"] { appearance: none; width: 18px; height: 18px; border: 3px solid #667eea; border-radius: 50%; margin-right: 8px; }
        .radio-group input[type="radio"]:checked { background: #667eea; box-shadow: 0 0 10px rgba(102, 126, 234, 0.5); }
        .radio-group label { color: #4a5568; font-weight: 600; }
        .output-group { display: flex; justify-content: space-between; align-items: center; margin: 15px 0; padding: 10px; background: rgba(255,255,255,0.1); border-radius: 8px; }
        .highlight { font-size: 40px; color: #ffd700; text-align: center; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); margin: 20px 0; }
        .blue-text { color: #63b3ed; font-weight: bold; font-size: 16px; }
        button { background: linear-gradient(145deg, #667eea, #764ba2); color: white; padding: 12px 20px; border: none; border-radius: 8px; cursor: pointer; width: 100%; margin: 8px 0; font-weight: 600; transition: all 0.3s; }
        button:hover { transform: translateY(-2px); box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4); }
        .tabs { text-align: center; margin-bottom: 20px; }
        .tab-btn { background: rgba(255,255,255,0.2); color: white; padding: 12px 30px; border: none; border-radius: 25px; margin: 0 10px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
        .tab-btn.active, .tab-btn:hover { background: linear-gradient(145deg, #667eea, #764ba2); transform: translateY(-2px); }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        @media (max-width: 768px) { .container { flex-direction: column; } }
    </style>
</head>
<body>
    <!-- Language Selector -->
    <div style="text-align: center; margin: 10px 0;">
        <select id="languageSelector" onchange="changeLanguage()" style="padding: 8px 15px; border: 2px solid #667eea; border-radius: 8px; background: white; color: #4a5568; font-weight: 600;">
            <option value="en">English</option>
            <option value="te">‡∞§‡±Ü‡∞≤‡±Å‡∞ó‡±Å (Telugu)</option>
            <option value="hi">‡§π‡§ø‡§Ç‡§¶‡•Ä (Hindi)</option>
        </select>
    </div>
    
    <h1 data-translate="title">Chit Fund Calculator</h1>
    
    <div class="tabs">
        <button class="tab-btn active" onclick="showTab('calculator')" data-translate="calculator">Calculator</button>
    </div>
    
    <div id="calculator" class="tab-content active">
        <div class="container">
            <div class="input-section">
                <h2 data-translate="chit">Chit</h2>
                <div class="input-line">
                    <label data-translate="chit_amount">Chit Amount (‚Çπ):</label>
                    <input type="text" id="chitAmount" value="40,00,000" onblur="formatIndianInput(this)" onfocus="removeCommas(this)">
                </div>
                <div class="input-line">
                    <label data-translate="commission">Commission (%):</label>
                    <input type="text" id="commission" value="4.00" onblur="formatCommissionInput(this)" onfocus="removeCommas(this)">
                </div>
                <div class="input-line">
                    <label data-translate="total_months">Total Months:</label>
                    <input type="number" id="totalMonths" value="20" min="1">
                </div>
                <div class="input-line">
                    <label data-translate="current_month">Current Month:</label>
                    <input type="text" id="currentMonth" value="1" onblur="formatCurrentMonthInput(this)" onfocus="removeCommas(this)">
                </div>
                <div class="input-line">
                    <label data-translate="auction_amount">Auction Amount (‚Çπ):</label>
                    <input type="text" id="auctionAmount" value="2,00,000" onblur="formatIndianInput(this)" onfocus="removeCommas(this)">
                </div>
                
                <h2 style="margin-top: 40px;" data-translate="auction">Auction</h2>
                <div class="radio-group">
                    <span><input type="radio" id="bidRadio" name="auctionType" value="bid" checked><label for="bidRadio" data-translate="bid_amount">Bid Amount</label></span>
                    <span><input type="radio" id="interestRadio" name="auctionType" value="interest"><label for="interestRadio" data-translate="bid_interest">Bid Interest</label></span>
                </div>
                
                <div id="bidAmountGroup">
                    <div class="input-line">
                        <label data-translate="bid_amount">Bid Amount (‚Çπ):</label>
                        <input type="text" id="bidAmount" value="12,70,000" onblur="formatIndianInput(this)" onfocus="removeCommas(this)">
                    </div>
                    <input type="range" id="bidAmountSlider" min="0" max="2000000" value="1270000">
                </div>
                
                <div id="bidInterestGroup" style="display: none;">
                    <div class="input-line">
                        <label data-translate="bid_interest">Bid Interest (%):</label>
                        <input type="number" id="bidInterest" value="10" step="0.01">
                    </div>
                    <input type="range" id="bidInterestSlider" min="0" max="100" value="10" step="0.01">
                </div>
            </div>
            
            <div class="output-section">
                <h2 data-translate="bidder">Bidder</h2>
                <div style="text-align: center; margin: 20px 0;">
                    <div data-translate="bidding_rate">Bidding Rate</div>
                    <div id="biddingRate" class="highlight">2.14%</div>
                </div>
                <div class="output-group">
                    <span data-translate="bidder_gets">Bidder Gets:</span>
                    <span id="bidderGet" class="blue-text">‚Çπ27,30,000</span>
                </div>
                
                <button onclick="shareResult()" data-translate="share_result">üì§ Share Result</button>
                <button onclick="shareAsImage()" data-translate="share_image">üñºÔ∏è Share Image</button>
                <button onclick="saveResult()" data-translate="save">üíæ Save</button>
                
                <h2 style="margin-top: 30px;" data-translate="other_members">Other Members</h2>
                <div class="output-group">
                    <span data-translate="original_installment">Original Installment:</span>
                    <span id="originalInstallment">‚Çπ2,00,000</span>
                </div>
                <div class="output-group">
                    <span data-translate="dividend_per_person">Dividend per Person:</span>
                    <span id="dividendPerPerson">‚Çπ55,500</span>
                </div>
                <div class="output-group">
                    <span data-translate="payable_installment">Payable Installment:</span>
                    <span id="payableInstallment" class="blue-text">‚Çπ1,44,500</span>
                </div>
                <div class="output-group">
                    <span data-translate="monthly_savings">Monthly Savings:</span>
                    <span id="monthlySavings">27.75%</span>
                </div>
                
                <h2 style="margin-top: 30px;" data-translate="manager">Manager</h2>
                <div class="output-group">
                    <span data-translate="chit_commission">Chit Commission:</span>
                    <span id="chitCommission">‚Çπ1,60,000</span>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Language translations
        const translations = {
            en: {
                title: "Chit Fund Calculator",
                calculator: "Calculator",
                chit: "Chit",
                chit_amount: "Chit Amount (‚Çπ):",
                commission: "Commission (%):",
                total_months: "Total Months:",
                current_month: "Current Month:",
                auction_amount: "Auction Amount (‚Çπ):",
                auction: "Auction",
                bid_amount: "Bid Amount",
                bid_interest: "Bid Interest",
                bidder: "Bidder",
                bidding_rate: "Bidding Rate",
                bidder_gets: "Bidder Gets:",
                share_result: "üì§ Share Result",
                share_image: "üñºÔ∏è Share Image",
                save: "üíæ Save",
                other_members: "Other Members",
                original_installment: "Original Installment:",
                dividend_per_person: "Dividend per Person:",
                payable_installment: "Payable Installment:",
                monthly_savings: "Monthly Savings:",
                manager: "Manager",
                chit_commission: "Chit Commission:"
            },
            te: {
                title: "‡∞ö‡∞ø‡∞ü‡±ç ‡∞´‡∞Ç‡∞°‡±ç ‡∞ï‡∞æ‡∞≤‡∞ø‡∞ï‡±ç‡∞Ø‡±Å‡∞≤‡±á‡∞ü‡∞∞‡±ç",
                calculator: "‡∞ï‡∞æ‡∞≤‡∞ø‡∞ï‡±ç‡∞Ø‡±Å‡∞≤‡±á‡∞ü‡∞∞‡±ç",
                chit: "‡∞ö‡∞ø‡∞ü‡±ç",
                chit_amount: "‡∞ö‡∞ø‡∞ü‡±ç ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç (‚Çπ):",
                commission: "‡∞ï‡∞Æ‡∞ø‡∞∑‡∞®‡±ç (%):",
                total_months: "‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç ‡∞®‡±Ü‡∞≤‡∞≤‡±Å:",
                current_month: "‡∞™‡±ç‡∞∞‡∞∏‡±ç‡∞§‡±Å‡∞§ ‡∞®‡±Ü‡∞≤:",
                auction_amount: "‡∞µ‡±á‡∞≤‡∞Ç ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç (‚Çπ):",
                auction: "‡∞µ‡±á‡∞≤‡∞Ç",
                bid_amount: "‡∞¨‡∞ø‡∞°‡±ç ‡∞Æ‡±ä‡∞§‡±ç‡∞§‡∞Ç",
                bid_interest: "‡∞¨‡∞ø‡∞°‡±ç ‡∞µ‡∞°‡±ç‡∞°‡±Ä",
                bidder: "‡∞¨‡∞ø‡∞°‡±ç‡∞°‡∞∞‡±ç",
                bidding_rate: "‡∞¨‡∞ø‡∞°‡±ç‡∞°‡∞ø‡∞Ç‡∞ó‡±ç ‡∞∞‡±á‡∞ü‡±ç",
                bidder_gets: "‡∞¨‡∞ø‡∞°‡±ç‡∞°‡∞∞‡±ç ‡∞™‡±ä‡∞Ç‡∞¶‡±Å‡∞§‡±Å‡∞Ç‡∞¶‡∞ø:",
                share_result: "üì§ ‡∞´‡∞≤‡∞ø‡∞§‡∞Ç ‡∞∑‡±á‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                share_image: "üñºÔ∏è ‡∞ö‡∞ø‡∞§‡±ç‡∞∞‡∞Ç ‡∞∑‡±á‡∞∞‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                save: "üíæ ‡∞∏‡±á‡∞µ‡±ç ‡∞ö‡±á‡∞Ø‡∞Ç‡∞°‡∞ø",
                other_members: "‡∞á‡∞§‡∞∞ ‡∞∏‡∞≠‡±ç‡∞Ø‡±Å‡∞≤‡±Å",
                original_installment: "‡∞Ö‡∞∏‡∞≤‡±Å ‡∞µ‡∞æ‡∞Ø‡∞ø‡∞¶‡∞æ:",
                dividend_per_person: "‡∞µ‡±ç‡∞Ø‡∞ï‡±ç‡∞§‡∞ø‡∞ï‡∞ø ‡∞°‡∞ø‡∞µ‡∞ø‡∞°‡±Ü‡∞Ç‡∞°‡±ç:",
                payable_installment: "‡∞ö‡±Ü‡∞≤‡±ç‡∞≤‡∞ø‡∞Ç‡∞ö‡∞µ‡∞≤‡∞∏‡∞ø‡∞® ‡∞µ‡∞æ‡∞Ø‡∞ø‡∞¶‡∞æ:",
                monthly_savings: "‡∞®‡±Ü‡∞≤‡∞µ‡∞æ‡∞∞‡±Ä ‡∞™‡±ä‡∞¶‡±Å‡∞™‡±Å‡∞≤‡±Å:",
                manager: "‡∞Æ‡±á‡∞®‡±á‡∞ú‡∞∞‡±ç",
                chit_commission: "‡∞ö‡∞ø‡∞ü‡±ç ‡∞ï‡∞Æ‡∞ø‡∞∑‡∞®‡±ç:"
            },
            hi: {
                title: "‡§ö‡§ø‡§ü ‡§´‡§Ç‡§° ‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞",
                calculator: "‡§ï‡•à‡§≤‡§ï‡•Å‡§≤‡•á‡§ü‡§∞",
                chit: "‡§ö‡§ø‡§ü",
                chit_amount: "‡§ö‡§ø‡§ü ‡§∞‡§æ‡§∂‡§ø (‚Çπ):",
                commission: "‡§ï‡§Æ‡•Ä‡§∂‡§® (%):",
                total_months: "‡§ï‡•Å‡§≤ ‡§Æ‡§π‡•Ä‡§®‡•á:",
                current_month: "‡§µ‡§∞‡•ç‡§§‡§Æ‡§æ‡§® ‡§Æ‡§π‡•Ä‡§®‡§æ:",
                auction_amount: "‡§®‡•Ä‡§≤‡§æ‡§Æ‡•Ä ‡§∞‡§æ‡§∂‡§ø (‚Çπ):",
                auction: "‡§®‡•Ä‡§≤‡§æ‡§Æ‡•Ä",
                bid_amount: "‡§¨‡§ø‡§° ‡§∞‡§æ‡§∂‡§ø",
                bid_interest: "‡§¨‡§ø‡§° ‡§¨‡•ç‡§Ø‡§æ‡§ú",
                bidder: "‡§¨‡§ø‡§°‡§∞",
                bidding_rate: "‡§¨‡§ø‡§°‡§ø‡§Ç‡§ó ‡§∞‡•á‡§ü",
                bidder_gets: "‡§¨‡§ø‡§°‡§∞ ‡§ï‡•ã ‡§Æ‡§ø‡§≤‡§§‡§æ ‡§π‡•à:",
                share_result: "üì§ ‡§™‡§∞‡§ø‡§£‡§æ‡§Æ ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç",
                share_image: "üñºÔ∏è ‡§õ‡§µ‡§ø ‡§∏‡§æ‡§ù‡§æ ‡§ï‡§∞‡•á‡§Ç",
                save: "üíæ ‡§∏‡•á‡§µ ‡§ï‡§∞‡•á‡§Ç",
                other_members: "‡§Ö‡§®‡•ç‡§Ø ‡§∏‡§¶‡§∏‡•ç‡§Ø",
                original_installment: "‡§Æ‡•Ç‡§≤ ‡§ï‡§ø‡§∏‡•ç‡§§:",
                dividend_per_person: "‡§™‡•ç‡§∞‡§§‡§ø ‡§µ‡•ç‡§Ø‡§ï‡•ç‡§§‡§ø ‡§°‡§ø‡§µ‡§ø‡§°‡•á‡§Ç‡§°:",
                payable_installment: "‡§¶‡•á‡§Ø ‡§ï‡§ø‡§∏‡•ç‡§§:",
                monthly_savings: "‡§Æ‡§æ‡§∏‡§ø‡§ï ‡§¨‡§ö‡§§:",
                manager: "‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§ï",
                chit_commission: "‡§ö‡§ø‡§ü ‡§ï‡§Æ‡•Ä‡§∂‡§®:"
            }
        };
        
        let currentLanguage = 'en';
        
        function changeLanguage() {
            const selector = document.getElementById('languageSelector');
            currentLanguage = selector.value;
            updateTexts();
        }
        
        function updateTexts() {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[currentLanguage] && translations[currentLanguage][key]) {
                    element.textContent = translations[currentLanguage][key];
                }
            });
        }
        
        function calculate() {
            const chitAmount = parseFloat(document.getElementById('chitAmount').value.replace(/,/g, '')) || 0;
            const commissionPercent = parseFloat(document.getElementById('commission').value.replace(/,/g, '')) || 0;
            const totalMonths = parseInt(document.getElementById('totalMonths').value) || 1;
            const currentMonth = parseInt(document.getElementById('currentMonth').value.replace(/,/g, '')) || 1;
            const auctionType = document.querySelector('input[name="auctionType"]:checked').value;
            
            let bidAmount, bidInterest;
            
            if (auctionType === 'bid') {
                bidAmount = parseFloat(document.getElementById('bidAmount').value.replace(/,/g, '')) || 0;
                const commission = (commissionPercent * chitAmount) / 100;
                const netAmount = chitAmount - bidAmount;
                const remainingMonths = totalMonths - currentMonth + 1;
                bidInterest = (bidAmount * 12 * 100) / (netAmount * remainingMonths);
            } else {
                bidInterest = parseFloat(document.getElementById('bidInterest').value) || 0;
                bidAmount = (bidInterest * chitAmount * (totalMonths - currentMonth + 1)) / 
                           (12 * 100 + bidInterest * (totalMonths - currentMonth + 1));
            }
            
            const commission = (commissionPercent * chitAmount) / 100;
            const bidderGets = chitAmount - bidAmount;
            const auctionAmount = parseFloat(document.getElementById('auctionAmount').value.replace(/,/g, '')) || 200000;
            const originalInstallment = auctionAmount;
            const totalDividend = bidAmount - commission;
            const dividendPerPerson = totalDividend / 20;
            const payableInstallment = originalInstallment - dividendPerPerson;
            const monthlySavings = (dividendPerPerson / originalInstallment) * 100;
            
            // Update display
            document.getElementById('biddingRate').textContent = bidInterest.toFixed(2) + '%';
            document.getElementById('bidderGet').textContent = '‚Çπ' + formatIndianNumber(bidderGets);
            document.getElementById('originalInstallment').textContent = '‚Çπ' + formatIndianNumber(originalInstallment);
            document.getElementById('dividendPerPerson').textContent = '‚Çπ' + formatIndianNumber(dividendPerPerson);
            document.getElementById('payableInstallment').textContent = '‚Çπ' + formatIndianNumber(payableInstallment);
            document.getElementById('monthlySavings').textContent = monthlySavings.toFixed(2) + '%';
            document.getElementById('chitCommission').textContent = '‚Çπ' + formatIndianNumber(commission);
            
            // Update sliders
            if (auctionType === 'bid') {
                document.getElementById('bidAmountSlider').value = bidAmount;
            } else {
                document.getElementById('bidInterestSlider').value = bidInterest;
                document.getElementById('bidAmount').value = formatIndianNumber(Math.round(bidAmount));
            }
        }
        
        function toggleAuctionType() {
            const auctionType = document.querySelector('input[name="auctionType"]:checked').value;
            const bidAmountGroup = document.getElementById('bidAmountGroup');
            const bidInterestGroup = document.getElementById('bidInterestGroup');
            
            if (auctionType === 'bid') {
                bidAmountGroup.style.display = 'block';
                bidInterestGroup.style.display = 'none';
            } else {
                bidAmountGroup.style.display = 'none';
                bidInterestGroup.style.display = 'block';
            }
            calculate();
        }
        
        function formatIndianNumber(num) {
            return new Intl.NumberFormat('en-IN').format(Math.round(num));
        }
        
        function formatIndianInput(input) {
            const value = parseFloat(input.value.replace(/,/g, '')) || 0;
            if (value > 0) {
                input.value = formatIndianNumber(value);
            }
        }
        
        function formatCommissionInput(input) {
            const value = parseFloat(input.value.replace(/,/g, '')) || 0;
            if (value > 0) {
                input.value = value.toFixed(2);
            }
        }
        
        function formatCurrentMonthInput(input) {
            const value = parseInt(input.value.replace(/,/g, '')) || 0;
            if (value > 0) {
                input.value = value.toString();
            }
        }
        
        function removeCommas(input) {
            input.value = input.value.replace(/,/g, '');
        }
        
        function shareResult() {
            const result = `Chit Fund Calculation:
Bidding Rate: ${document.getElementById('biddingRate').textContent}
Bidder Gets: ${document.getElementById('bidderGet').textContent}
Original Installment: ${document.getElementById('originalInstallment').textContent}
Dividend per Person: ${document.getElementById('dividendPerPerson').textContent}
Payable Installment: ${document.getElementById('payableInstallment').textContent}
Monthly Savings: ${document.getElementById('monthlySavings').textContent}
Manager Commission: ${document.getElementById('chitCommission').textContent}`;
            
            if (navigator.share) {
                navigator.share({ title: 'Chit Fund Calculator', text: result });
            } else {
                navigator.clipboard.writeText(result);
                alert('Result copied to clipboard!');
            }
        }
        
        function shareAsImage() {
            alert('Image sharing feature will be implemented soon!');
        }
        
        function saveResult() {
            const result = {
                chitAmount: document.getElementById('chitAmount').value,
                commission: document.getElementById('commission').value,
                totalMonths: document.getElementById('totalMonths').value,
                currentMonth: document.getElementById('currentMonth').value,
                biddingRate: document.getElementById('biddingRate').textContent,
                bidderGet: document.getElementById('bidderGet').textContent,
                payableInstallment: document.getElementById('payableInstallment').textContent
            };
            localStorage.setItem('chitCalculation_' + Date.now(), JSON.stringify(result));
            alert('Calculation saved!');
        }
        
        function showTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
        
        // Event listeners
        document.getElementById('chitAmount').addEventListener('input', calculate);
        document.getElementById('commission').addEventListener('input', calculate);
        document.getElementById('totalMonths').addEventListener('input', calculate);
        document.getElementById('currentMonth').addEventListener('input', calculate);
        document.getElementById('auctionAmount').addEventListener('input', calculate);
        document.getElementById('bidAmount').addEventListener('input', calculate);
        document.getElementById('bidInterest').addEventListener('input', calculate);
        document.getElementById('bidAmountSlider').addEventListener('input', function() {
            document.getElementById('bidAmount').value = formatIndianNumber(this.value);
            calculate();
        });
        document.getElementById('bidInterestSlider').addEventListener('input', function() {
            document.getElementById('bidInterest').value = this.value;
            calculate();
        });
        document.querySelectorAll('input[name="auctionType"]').forEach(radio => {
            radio.addEventListener('change', toggleAuctionType);
        });
        
        // Initialize
        calculate();
        updateTexts();
    </script>
</body>
</html>